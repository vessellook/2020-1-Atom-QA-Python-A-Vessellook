# Анализатор логов NGINX

## Bash скрипты

Все bash скрипты лежат в папке scripts/

### count.sh (tasks 1-2)
Скрипт count.sh выполняет подсчёт логов
Опции:
  -p PATH
      Задаёт путь к логам. Если директория, то логи собираются из всех файлов. Если путь не задан, то ожидает ввод со стандартного потока
  -o OUTPUT
      Задаёт файл для вывода. Если файл не задан, то выводит результат в стандартный поток вывода
  -c CODE
       Для всех заданий, кроме первого, задаёт код ответа, по которому фильтруются записи логов. Можно выбрать класс ошибок, например, проверять записи только с клиентскими ошибками, если передать -c 4. Для задания 5 по умолчанию опция -c 5, для задания 4 по умолчанию опция -c 4. Для остальных заданий опции
  -m METHOD
       Если задана опция -t 2, то задаёт метод, по которому фильтруются записи логов. По умолчанию GET
  -h
       Справка

Примеры:
scripts/count.sh < logs/access.log

scripts/count.sh -p logs/ -m POST

scritps/count.sh < logs/big.access.log -c 4

### top.sh (задания 3-5)
Скрипт top.sh выполняет фильтрацию и сортировку логов
Опции:
  -p PATH
      Задаёт путь к логам. Если директория, то логи собираются из всех файлов. Если путь не задан, то ожидает ввод со стандартного потока
  -o OUTPUT
      Задаёт файл для вывода. Если файл не задан, то выводит результат в стандартный поток вывода
  -c CODE
       Задаёт код ответа, по которому фильтруются записи логов. Можно выбрать класс ошибок, например, проверять записи только с клиентскими ошибками, если передать -c 4
  -m METHOD
       Задаёт HTTP метод, по которому фильтруются записи логов
  -s SORTBY
       Задаёт сортировку. Значение SIZE сортирует по убыванию размера тела ответа, значение LOCATION сортирует по частоте того или иного пути в HTTP запросе
  -l LIMIT
       Если задана опция -t 3, -t 4 или -t 5, то задаёт максимальное количество выводимых логов
  -f FILLER
       Если задана опция -t 3, -t 4 или -t 5, то задаёт разделитель между полями в выводимых записях. По умолчанию пробел
       В начале и конце строк разделитель не ставится, строки разделяются символом "\n"
  -h
       Справка
Примеры:
scripts/top.sh -c 4 -s LOCATION < logs/big.access.log

scripts/top.sh -c 5 -s SIZE -p logs/access.log

scripts/top.sh -m POST -c 404 -o output.txt < logs/
